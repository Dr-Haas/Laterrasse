(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,962,e=>{"use strict";var t=e.i(43476),l=e.i(71645);let s=["🍅","🥕","🥒","🧅","🥔","🌶️","🥦","🍆"];function r(){let e=(0,l.useRef)(null),[r,n]=(0,l.useState)("menu"),[a,i]=(0,l.useState)(0),[o,c]=(0,l.useState)(0),[d,x]=(0,l.useState)(1),[h,u]=(0,l.useState)(!1),[m,g]=(0,l.useState)(""),[f,p]=(0,l.useState)(""),[b,y]=(0,l.useState)(!1),[v,j]=(0,l.useState)(""),w=(0,l.useRef)(0),N=(0,l.useRef)(new Set),E=(0,l.useRef)({x:160,y:420,width:40,height:40}),S=(0,l.useRef)([]),R=(0,l.useRef)([]),k=(0,l.useRef)("right"),A=(0,l.useRef)(0);(0,l.useRef)(0);let C=(0,l.useCallback)(e=>{let t=[],l=1+(e-1)*.15;for(let e=0;e<3;e++)for(let r=0;r<6;r++)t.push({x:51.42857142857143*(r+.5),y:40+50*e,width:35,height:35,speed:+l,emoji:s[Math.floor(Math.random()*s.length)],points:10*(e+1)});R.current=t,k.current="right"},[]),M=(0,l.useCallback)(t=>{let l=e.current;if(!l)return;let s=l.getContext("2d");if(!s)return;s.fillStyle="#1e293b",s.fillRect(0,0,360,480);let a=E.current;N.current.has("ArrowLeft")&&a.x>0&&(a.x-=6),N.current.has("ArrowRight")&&a.x<320&&(a.x+=6);let o=Date.now();N.current.has(" ")&&o-A.current>250&&(S.current.push({x:a.x+20-3,y:a.y,width:6,height:16,active:!0}),A.current=o),S.current=S.current.filter(e=>!!e.active&&(e.y-=9,!(e.y<-16))&&(s.fillStyle="#c0c0c0",s.fillRect(e.x,e.y,e.width,.7*e.height),s.fillStyle="#8b4513",s.fillRect(e.x-1,e.y+.7*e.height,e.width+2,.3*e.height),s.fillStyle="#ffffff",s.fillRect(e.x+2,e.y+2,2,.5*e.height),!0));let c=!1,h=R.current;if(h.length>0){let e=Math.min(...h.map(e=>e.x)),t=Math.max(...h.map(e=>e.x+e.width));"right"===k.current&&t>=350?(k.current="left",c=!0):"left"===k.current&&e<=10&&(k.current="right",c=!0),h.forEach(e=>{c?e.y+=20:e.x+="right"===k.current?e.speed:-e.speed})}S.current.forEach(e=>{h.forEach((t,l)=>{e.active&&e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y&&(e.active=!1,i(e=>e+t.points),h.splice(l,1))})}),h.forEach(e=>{s.font=`${e.width}px Arial`,s.textAlign="center",s.textBaseline="middle",s.fillText(e.emoji,e.x+e.width/2,e.y+e.height/2),e.y+e.height>=a.y&&n("gameOver")}),s.fillStyle="#ffffff",s.beginPath(),s.ellipse(a.x+a.width/2,a.y+15,20,15,0,0,2*Math.PI),s.fill(),s.fillStyle="#ffffff",s.fillRect(a.x+a.width/2-15,a.y,30,15),s.fillStyle="#ffdbac",s.beginPath(),s.arc(a.x+a.width/2,a.y+35,18,0,2*Math.PI),s.fill(),s.fillStyle="#000000",s.beginPath(),s.arc(a.x+a.width/2-7,a.y+32,2,0,2*Math.PI),s.arc(a.x+a.width/2+7,a.y+32,2,0,2*Math.PI),s.fill(),s.strokeStyle="#000000",s.lineWidth=2,s.beginPath(),s.arc(a.x+a.width/2,a.y+35,8,.2,Math.PI-.2),s.stroke(),s.fillStyle="#ffffff",s.fillRect(a.x+a.width/2-18,a.y+45,36,15),0===h.length&&(x(e=>e+1),C(d+1),i(e=>e+100*d)),"playing"===r&&(w.current=requestAnimationFrame(M))},[r,d,C]),T=(0,l.useCallback)(()=>{n("playing"),i(0),x(1),E.current.x=160,S.current=[],C(1)},[C]);(0,l.useEffect)(()=>{let e=e=>{["ArrowLeft","ArrowRight"," "].includes(e.key)&&(e.preventDefault(),N.current.add(e.key)),"Escape"===e.key&&"playing"===r&&n("paused")},t=e=>{N.current.delete(e.key)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[r]),(0,l.useEffect)(()=>("playing"===r&&(w.current=requestAnimationFrame(M)),()=>{w.current&&cancelAnimationFrame(w.current)}),[r,M]),(0,l.useEffect)(()=>{a>o&&c(a)},[a,o]),(0,l.useEffect)(()=>{"gameOver"===r&&w.current&&cancelAnimationFrame(w.current)},[r]);let P=async()=>{if(!m.trim())return void j("❌ Veuillez entrer un nom");if(!f.trim()||!f.includes("@"))return void j("❌ Veuillez entrer un email valide");y(!0),j("");try{(await fetch("https://laterrasse.onrender.com/api/game-scores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:m.trim(),playerEmail:f.trim(),score:a,difficulty:d>=5?"hard":d>=3?"medium":"easy",gameDuration:Math.floor(Date.now()/1e3)})})).ok?(j("✅ Score enregistré avec succès !"),g(""),p(""),setTimeout(()=>{u(!1),j("")},2e3)):j("❌ Erreur lors de l'enregistrement")}catch(e){j("❌ Erreur de connexion au serveur")}finally{y(!1)}},O=(e,t)=>{if("left"===e||"right"===e){let l="left"===e?"ArrowLeft":"ArrowRight";t?N.current.add(l):N.current.delete(l)}else"shoot"===e&&t&&(N.current.add(" "),setTimeout(()=>N.current.delete(" "),100))};return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 pb-8",children:[(0,t.jsxs)("div",{style:{padding:"20pxgit a"},className:"relative bg-gradient-to-b from-purple-400 via-purple-500 to-purple-600 rounded-3xl p-6 shadow-2xl max-w-md mx-auto border-8 border-purple-700",children:[(0,t.jsxs)("div",{className:"text-center mb-3",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-purple-900 tracking-wider",children:"CHEF BOY"}),(0,t.jsx)("div",{className:"text-xs text-purple-800 tracking-widest",children:"ADVANCE"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-b from-slate-700 to-slate-800 rounded-2xl p-4 mb-6 shadow-inner",style:{padding:"10px"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${"playing"===r?"bg-red-500 animate-pulse":"bg-red-900"}`}),(0,t.jsx)("span",{className:"text-xs text-slate-400",children:"POWER"})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-2 px-2",children:[(0,t.jsxs)("div",{className:"text-green-400 text-sm font-mono",children:["SCORE: ",a.toString().padStart(6,"0")]}),(0,t.jsxs)("div",{className:"text-green-400 text-sm font-mono",children:["LV: ",d.toString().padStart(2,"0")]})]}),(0,t.jsxs)("div",{className:"relative bg-[#9bbc0f] rounded-lg overflow-hidden shadow-lg border-4 border-slate-900",children:[(0,t.jsx)("canvas",{ref:e,width:360,height:480,className:"w-full h-auto",style:{imageRendering:"crisp-edges"}}),"menu"===r&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80",children:(0,t.jsxs)("div",{className:"text-center text-white space-y-4 p-4",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"🧑‍🍳 Chef Invaders 🔪"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsx)("p",{style:{margin:"10px 0"},children:"D-Pad : Déplacer"}),(0,t.jsx)("p",{children:"Bouton A : Tirer"})]}),(0,t.jsx)("button",{style:{padding:"5px 10px",margin:"10px 0"},onClick:T,className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-colors",children:"START"})]})}),"paused"===r&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80",children:(0,t.jsxs)("div",{className:"text-center text-white space-y-4",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold",children:"⏸️ PAUSE"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>n("playing"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-bold",children:"REPRENDRE"}),(0,t.jsx)("button",{onClick:()=>n("menu"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-bold",children:"MENU"})]})]})}),"gameOver"===r&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/90 overflow-y-auto",children:(0,t.jsxs)("div",{className:"text-center text-white space-y-3 p-4 max-w-md",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-red-500",children:"GAME OVER!"}),(0,t.jsxs)("div",{className:"text-lg space-y-1",style:{margin:"10px 0"},children:[(0,t.jsxs)("p",{style:{margin:"10px 0"},children:["Score: ",(0,t.jsx)("span",{className:"text-yellow-400 font-bold",children:a})]}),(0,t.jsxs)("p",{style:{margin:"10px 0"},children:["Niveau: ",(0,t.jsx)("span",{className:"text-green-400 font-bold",children:d})]}),a===o&&a>0&&(0,t.jsx)("p",{className:"text-purple-400 font-bold animate-pulse text-sm",children:"🏆 RECORD ! 🏆"})]}),h?(0,t.jsxs)("div",{className:"bg-slate-800 p-4 rounded-lg space-y-3",style:{margin:"15px 0"},children:[(0,t.jsx)("h4",{className:"text-lg font-bold text-green-400",children:"📝 Enregistrer le score"}),(0,t.jsxs)("div",{className:"space-y-2 text-left",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-300 mb-1",children:"Nom :"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"Votre nom",maxLength:50,className:"w-full px-3 py-2 bg-slate-700 text-white rounded border border-slate-600 focus:border-green-500 focus:outline-none text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-300 mb-1",children:"Email :"}),(0,t.jsx)("input",{type:"email",value:f,onChange:e=>p(e.target.value),placeholder:"votre@email.com",className:"w-full px-3 py-2 bg-slate-700 text-white rounded border border-slate-600 focus:border-green-500 focus:outline-none text-sm"})]})]}),v&&(0,t.jsx)("p",{className:`text-sm ${v.includes("✅")?"text-green-400":"text-red-400"}`,children:v}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:P,disabled:b,className:`flex-1 px-4 py-2 rounded-lg font-bold text-sm ${b?"bg-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:b?"⏳ Envoi...":"✅ Valider"}),(0,t.jsx)("button",{onClick:()=>{u(!1),j("")},disabled:b,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold text-sm",children:"✖️"})]})]}):(0,t.jsxs)("div",{className:"space-y-3",style:{margin:"15px 0"},children:[(0,t.jsx)("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold text-sm w-full",children:"💾 Enregistrer mon score"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Entrez dans le tableau des meilleurs scores !"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",style:{margin:"10px 0"},children:[(0,t.jsx)("button",{style:{padding:"10px 20px"},onClick:T,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-bold",children:"REJOUER"}),(0,t.jsx)("button",{style:{padding:"10px 20px"},onClick:()=>n("menu"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm font-bold",children:"MENU"})]})]})})]}),(0,t.jsx)("div",{className:"mt-2 text-center",children:(0,t.jsxs)("span",{className:"text-xs text-slate-400 font-mono",children:["HI-SCORE: ",o.toString().padStart(6,"0")]})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-end px-2",children:[(0,t.jsx)("div",{className:"relative w-32 h-32",children:(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-slate-800 rounded-sm"}),(0,t.jsx)("button",{onTouchStart:()=>O("left",!0),onTouchEnd:()=>O("left",!1),onMouseDown:()=>O("left",!0),onMouseUp:()=>O("left",!1),onMouseLeave:()=>O("left",!1),className:"absolute left-0 top-1/2 -translate-y-1/2 w-12 h-10 bg-slate-800 hover:bg-slate-700 active:bg-slate-600 rounded-l-lg shadow-lg border-2 border-slate-900 flex items-center justify-center text-white font-bold select-none",style:{touchAction:"none"},children:"◀"}),(0,t.jsx)("button",{onTouchStart:()=>O("right",!0),onTouchEnd:()=>O("right",!1),onMouseDown:()=>O("right",!0),onMouseUp:()=>O("right",!1),onMouseLeave:()=>O("right",!1),className:"absolute right-0 top-1/2 -translate-y-1/2 w-12 h-10 bg-slate-800 hover:bg-slate-700 active:bg-slate-600 rounded-r-lg shadow-lg border-2 border-slate-900 flex items-center justify-center text-white font-bold select-none",style:{touchAction:"none"},children:"▶"})]})}),(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("button",{onTouchStart:()=>O("shoot",!0),onMouseDown:()=>O("shoot",!0),className:"w-16 h-16 bg-red-600 hover:bg-red-700 active:bg-red-800 rounded-full shadow-lg border-4 border-red-800 flex items-center justify-center text-white font-bold text-xl select-none transition-all",style:{touchAction:"none"},children:"A"}),(0,t.jsx)("span",{className:"text-xs text-purple-900 font-bold block mt-1",children:"FIRE"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("button",{onClick:()=>{"playing"===r?n("paused"):"paused"===r&&n("playing")},className:"w-16 h-16 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 rounded-full shadow-lg border-4 border-yellow-700 flex items-center justify-center text-white font-bold text-xl select-none transition-all",style:{touchAction:"none"},children:"B"}),(0,t.jsx)("span",{className:"text-xs text-purple-900 font-bold block mt-1",children:"PAUSE"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-center gap-4 mt-6",style:{margin:"10px 0"},children:[(0,t.jsx)("button",{onClick:()=>"menu"===r&&T(),className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 active:bg-slate-500 rounded-full text-xs text-white font-bold shadow-md transform rotate-[-10deg] select-none",style:{touchAction:"none",padding:"2px 5px"},children:"START"}),(0,t.jsx)("button",{onClick:()=>n("menu"),className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 active:bg-slate-500 rounded-full text-xs text-white font-bold shadow-md transform rotate-[-10deg] select-none",style:{touchAction:"none",padding:"2px 5px"},children:"SELECT"})]}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 flex flex-col gap-1",children:[...Array(6)].map((e,l)=>(0,t.jsx)("div",{className:"flex gap-1",children:[void 0,void 0,void 0].map((e,l)=>(0,t.jsx)("div",{className:"w-1 h-1 rounded-full bg-purple-700"},l))},l))})]}),(0,t.jsxs)("div",{style:{padding:"20px",margin:"5px 0"},className:"bg-slate-800 p-4 rounded-lg border-2 border-slate-600 text-white max-w-md text-sm",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2",children:"📖 Instructions :"}),(0,t.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,t.jsx)("li",{children:"• Utilisez le D-Pad pour déplacer le chef"}),(0,t.jsx)("li",{children:"• Bouton A pour lancer des couteaux"}),(0,t.jsx)("li",{children:"• Bouton B pour mettre en pause"}),(0,t.jsx)("li",{children:"• Éliminez tous les ingrédients !"}),(0,t.jsx)("li",{children:"• La difficulté augmente à chaque niveau"})]})]})]})}e.s(["ChefInvaders",()=>r])}]);